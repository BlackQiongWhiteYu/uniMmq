{"version":3,"sources":["uni-app:///main.js","webpack:///D:/demo/uniMmq/pages/login/register.vue?05a0","webpack:///D:/demo/uniMmq/pages/login/register.vue?c2d0","webpack:///D:/demo/uniMmq/pages/login/register.vue?b2f5","webpack:///D:/demo/uniMmq/pages/login/register.vue?f1af","uni-app:///pages/login/register.vue","webpack:///D:/demo/uniMmq/pages/login/register.vue?fc92","webpack:///D:/demo/uniMmq/pages/login/register.vue?0d15"],"names":["createPage","Page"],"mappings":"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","file":"pages/login/register.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/login/register.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./register.vue?vue&type=template&id=24dc7ac2&\"\nvar renderjs\nimport script from \"./register.vue?vue&type=script&lang=js&\"\nexport * from \"./register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./register.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/register.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=template&id=24dc7ac2&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"register\">\r\n    <view class=\"content\">\r\n      <!-- 头部logo -->\r\n      <view class=\"header\">\r\n        <image :src=\"logoImage\"></image>\r\n      </view>\r\n      <!-- 主体 -->\r\n      <view class=\"main\">\r\n        <text class=\"goLink\" @click=\"goLogin\">已有账号，去登录</text>\r\n        <wInput\r\n          v-model=\"account\"\r\n          type=\"text\"\r\n          maxlength=\"11\"\r\n          placeholder=\"账号\"\r\n        ></wInput>\r\n        <wInput\r\n          v-model=\"password\"\r\n          type=\"password\"\r\n          maxlength=\"11\"\r\n          placeholder=\"登录密码\"\r\n          isShowPass\r\n        ></wInput>\r\n        <!-- <wInput v-model=\"verCode\" type=\"number\" maxlength=\"4\" placeholder=\"验证码\" isShowCode ref=\"runCode\"\r\n          @setCode=\"getVerCode()\"></wInput> -->\r\n      </view>\r\n\r\n      <wButton\r\n        class=\"wbutton\"\r\n        text=\"注 册\"\r\n        :rotate=\"isRotate\"\r\n        @click.native=\"startReg()\"\r\n      ></wButton>\r\n\r\n      <!-- 底部信息 -->\r\n      <view class=\"footer\">\r\n        <text\r\n          @tap=\"isShowAgree\"\r\n          class=\"cuIcon\"\r\n          :class=\"showAgree ? 'cuIcon-radiobox' : 'cuIcon-round'\"\r\n        >\r\n          同意</text\r\n        >\r\n        <!-- 协议地址 -->\r\n        <text url=\"\" open-type=\"navigate\">《协议》</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nlet _this;\r\nimport wInput from \"../../components/watch-login/watch-input.vue\"; //input\r\nimport wButton from \"../../components/watch-login/watch-button.vue\"; //button\r\nimport Logo from '../../static/logo.png'\r\n\r\nimport { reg } from \"@/utils/api.js\"\r\nexport default {\r\n  data() {\r\n    return {\r\n      //logo图片 base64\r\n      logoImage: Logo,\r\n      account: \"\", // 用户/电话\r\n      password: \"\", //密码\r\n      verCode: \"\", //验证码\r\n      showAgree: true, //协议是否选择\r\n      isRotate: false, //是否加载旋转\r\n    };\r\n  },\r\n  components: {\r\n    wInput,\r\n    wButton,\r\n  },\n  updated() {\n    this.isStart()\n  },\r\n  mounted() {\r\n    this.isStart()\r\n    _this = this;\r\n  },\r\n  methods: {\r\n    goLogin() {\r\n      uni.navigateTo({\r\n        url: \"../../pages/login/login\",\r\n      });\r\n    },\r\n    isStart() {\r\n      // 判断缓存中是否有登录信息\r\n      try {\r\n        const value = uni.getStorageSync(\"userData\");\r\n        if (value?.accessToken) {\r\n          uni.showLoading({\r\n            title: \"已登录用户, 重新链接\",\r\n          });\r\n          setTimeout(()=> {\r\n            uni.hideLoading();\r\n            uni.switchTab({\r\n              url: \"../api_config/index\",\r\n            });\r\n          }, 1000)\r\n        }\r\n      } catch (e) {\r\n        // error\r\n      }\r\n    },\r\n    isShowAgree() {\r\n      //是否选择协议\r\n      _this.showAgree = !_this.showAgree;\r\n    },\r\n    getVerCode() {\r\n      //获取验证码\r\n      if (_this.account.length != 11) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          position: \"bottom\",\r\n          title: \"手机号不正确\",\r\n        });\r\n        return false;\r\n      }\r\n      console.log(\"获取验证码\");\r\n      this.$refs.runCode.$emit(\"runCode\"); //触发倒计时（一般用于请求成功验证码后调用）\r\n      uni.showToast({\r\n        icon: \"none\",\r\n        position: \"bottom\",\r\n        title: \"模拟倒计时触发\",\r\n      });\r\n\r\n      setTimeout(function () {\r\n        _this.$refs.runCode.$emit(\"runCode\", 0); //假装模拟下需要 终止倒计时\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          position: \"bottom\",\r\n          title: \"模拟倒计时终止\",\r\n        });\r\n      }, 3000);\r\n    },\r\n    //注册\r\n    async startReg() {\r\n      //注册\r\n\t  \r\n      if (this.isRotate) {\r\n        //判断是否加载中，避免重复点击请求\r\n        return false;\r\n      }\r\n      if (this.showAgree == false) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          position: \"bottom\",\r\n          title: \"请先同意《协议》\",\r\n        });\r\n        return false;\r\n      }\r\n      if (this.account.length === 0) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          position: \"bottom\",\r\n          title: \"请输入账号\",\r\n        });\r\n        return false;\r\n      }\r\n      if (this.password.length < 6) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          position: \"bottom\",\r\n          title: \"密码不正确\",\r\n        });\r\n        return false;\r\n      }\r\n      _this.isRotate = true;\r\n      try {\r\n\t\tconst res =  await reg({\r\n\t\t\tpasswd: this.password,\r\n\t\t\tuserName: this.account\r\n\t\t})\r\n\t\tsetTimeout(() => {\r\n\t\t  _this.isRotate = false;\r\n\t\t}, 1000)\r\n          switch (res.code) {\r\n            case 0:\r\n              uni.showToast({\r\n                title: '注册成功',\r\n                duration: 1000\r\n              });\r\n              //保存用户信息和accessToken\r\n              let userdata = {\r\n                accessToken: res?.data?.token,\r\n              } \r\n              //存入缓存\r\n              uni.setStorageSync(\"userData\", userdata); \r\n              setTimeout(() => {\r\n                uni.switchTab({\r\n                  url: \"../api_config/index\",\r\n                })\r\n              }, 100)\r\n              \r\n              break;\r\n            case 1:\r\n              uni.showToast({\r\n                title: '用户名已注册',\r\n                icon: \"none\",\r\n                duration: 1000\r\n              });\r\n              break\r\n          }\r\n        // })\r\n        \r\n      } catch (err) {\r\n        uni.showToast({\r\n          title: '注册失败',\r\n          icon: \"none\",\r\n          duration: 1000\r\n        })\r\n        setTimeout(() => {\r\n          _this.isRotate = false;\r\n        }, 1000);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import url(\"../../components/watch-login/css/icon.css\");\r\n@import url(\"./css/main.css\");\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1621674179683\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}